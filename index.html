<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fusion</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
    <!-- Welcome Page -->
    <div id="welcome-page" style="display:block;">
        <h1>Welcome to Fusion</h1>
        <button onclick="showPage('signup-page')">Signup</button>
        <button onclick="showPage('login-page')">Login</button>
    </div>

    <!-- Signup Page -->
    <div id="signup-page" style="display:none;">
        <div class="container">
            <h1>Fusion</h1>
            <div class="menu">
                <h3>Account</h3>
                <ul>
                    <li><a href="#" onclick="showPage('login-page')">Login</a></li>
                    <li><a href="#" onclick="showPage('signup-page')" class="active">Signup</a></li>
                </ul>
            </div>
        </div>
        <div class="content">
            <h2>Signup</h2>
            <input type="text" id="signup-username" placeholder="Enter username">
            <input type="password" placeholder="Enter password">
            <input type="password" placeholder="Confirm password">
        </div>
        <button onclick="captureSignup()">Signup</button>
    </div>


    <!-- Login Page -->
    <div id="login-page" style="display:none;">
        <div class="container">
            <h1>Fusion</h1>
            <div class="menu">
                <h3>Account</h3>
                <ul>
                    <li><a href="#" onclick="showPage('login-page')" class="active">Login</a></li>
                    <li><a href="#" onclick="showPage('signup-page')">Signup</a></li>
                </ul>
            </div>
        </div>
        <div class="content">
            <h2>Login</h2>
            <input type="text" id="login-username" placeholder="Enter username">
            <input type="password" placeholder="Enter password">
        </div>
        <button onclick="captureLogin()">Login</button>
    </div>


    <!-- Institution Selection Page -->
    <div id="institution-page" style="display:none;">
        <h2>Select Your Institution</h2>
        <div class="input-container">
            <input type="text" id="search-bar" placeholder="Search for your institution..."
                oninput="filterInstitutions();">
            <button id="continue-button" class="disabled" disabled onclick="captureInstitution()">Continue</button>
        </div>
        <ul id="institution-list"></ul>
    </div>

    <!-- Course Selection Page -->
    <div id="course-page" style="display: none;">
        <h2>Select Your Course</h2>
        <div class="input-container">
            <input type="text" id="course-search-bar" placeholder="Search for your course..."
                oninput="filterCourses();">
            <button id="course-continue-button" class="disabled" disabled
                onclick="showPage('profile-page')">Continue</button>
        </div>
        <ul id="course-list"></ul>

        <!-- Fixed Selected Courses List -->
        <div id="selected-courses-list" style="display: none;">
            <h3>Selected Courses:</h3>
            <ul></ul>
        </div>
    </div>



    <!-- Profile Page -->
    <div id="profile-page" style="display:none;">
        <h2>My Account</h2>
        <div class="profile-container">
            <div class="profile-photo-section">
                <img id="profile-photo" src="photos/default_profile.jpg" alt="Default Profile Photo">
                <button onclick="openPhotoModal()" class="edit-button">
                    <i class="fas fa-edit"></i>
                </button>
            </div>
            <div class="user-info">
                <p id="profile-username"></p>
                <p id="profile-institution"></p>
            </div>
        </div>
        <div class="course-management">
            <h3>Courses</h3>
            <ul id="profile-courses-list"></ul>
        </div>
        <button id="save-profile-button" onclick="saveProfile()">Save</button>
    </div>

    <!-- Friend Request Area -->
    <div id="friend-request-area" style="display: none;" class="friend-request-area">
        <button class="close-button" onclick="closeFriendRequestArea()">
            <i class="fas fa-times"></i>
        </button>
        <h3>Friend Requests</h3>
        <ul id="friend-request-list" class="friend-request-list">
            <li>
                <img src="photos/Erica.jpg" alt="Erica" class="friend-request-photo">
                <span class="friend-request-name">Erica</span>
                <button class="accept-button" onclick="acceptRequest('Erica')">
                    <i class="fas fa-check"></i>
                </button>
                <button class="reject-button" onclick="rejectRequest('Erica')">
                    <i class="fas fa-times"></i>
                </button>
            </li>
        </ul>
    </div>

    <!-- Home Page -->
    <div id="home-page" style="display:none;">
        <div class="top-bar">
            <button onclick="toggleFriendRequestArea()" class="icon-button">
                <i class="fas fa-envelope"></i> <!-- Message Icon -->
                <span id="red-dot" class="red-dot"></span>
            </button>
            <button onclick="showPage('friendlist-page')" class="icon-button">
                <i class="fas fa-user-friends"></i> <!-- Friendlist Icon -->
            </button>
            <button onclick="showPage('profile-page')" class="icon-button">
                <i class="fas fa-user"></i> <!-- Profile Icon -->
            </button>
            <button onclick="showPage('home-page')" class="icon-button">
                <i class="fas fa-house"></i> <!-- Home Icon -->
            </button>
        </div>

        <h2>Home</h2>
        <div class="container">
            <div class="menu">
                <h3>Your Courses</h3>
                <ul id="home-courses-menu"></ul>
            </div>
        </div>

        <div class="home-content">
            <p>Welcome to your dashboard!</p>
        </div>
    </div>


    <!-- Class Page -->
    <div id="class-page" style="display:none;">
        <div class="top-bar">
            <h2 id="class-title" style="color: white;">Class Name</h2>
            <button onclick="toggleFriendRequestArea()" class="icon-button">
                <i class="fas fa-envelope"></i> <!-- Message Icon -->
            </button>
            <button onclick="showPage('friendlist-page')" class="icon-button">
                <i class="fas fa-user-friends"></i> <!-- Friendlist Icon -->
            </button>
            <button onclick="showPage('profile-page')" class="icon-button">
                <i class="fas fa-user"></i> <!-- Profile Icon -->
            </button>
            <button onclick="showPage('home-page')" class="icon-button">
                <i class="fas fa-house"></i> <!-- Home Icon -->
            </button>
        </div>

        <div class="container">
            <div class="menu">
                <h3>Your Courses</h3>
                <ul id="home-courses-menu"></ul>
            </div>

            <div class="class-content-wrapper">
                <div class="course-buttons">
                    <button class="menu-btn active" onclick="showClassContent('class-chat')">Chat</button>
                    <button class="menu-btn" onclick="showClassContent('class-resource')">Resource</button>
                    <button class="menu-btn" onclick="showClassContent('class-members')">Members</button>
                </div>


                <!-- Chat Content -->
                <div id="class-chat" style="display:block;">
                    <div class="chat-box">

                        <div class="chat-message other">
                            <img src="photos/emily.jpg" alt="Emily" class="chat-profile">
                            <div>
                                <p class="sender-name">Emily</p>
                                <div class="message-bubble">Hey, did you guys finish the assignment?</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/jonathan.jpg" alt="Justin" class="chat-profile">
                            <div>
                                <p class="sender-name">Jonathan</p>
                                <div class="message-bubble">Not yet, it's pretty challenging!</div>
                            </div>
                        </div>

                        <div class="chat-message user">
                            <div class="message-bubble">I stuck on the third question</div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/xavier.jpg" alt="Xavier" class="chat-profile">
                            <div>
                                <p class="sender-name">Xavier</p>
                                <div class="message-bubble">What assignment?</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/emily.jpg" alt="Emily" class="chat-profile">
                            <div>
                                <p class="sender-name">Emily</p>
                                <div class="message-bubble">The weekly assignment, released yesterday.</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/xavier.jpg" alt="Xavier" class="chat-profile">
                            <div>
                                <p class="sender-name">Xavier</p>
                                <div class="message-bubble">Wait what? I thought we're not doing any assignments for
                                    this class. I didn't finish any of them</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/jonathan.jpg" alt="Justin" class="chat-profile">
                            <div>
                                <p class="sender-name">Jonathan</p>
                                <div class="message-bubble">rip</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/david.jpg" alt="David" class="chat-profile">
                            <div>
                                <p class="sender-name">David</p>
                                <div class="message-bubble">Maybe the prof can give you makeup assignments. Don't stress
                                    upon it!</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/xavier.jpg" alt="Xavier" class="chat-profile">
                            <div>
                                <p class="sender-name">Xavier</p>
                                <div class="message-bubble">I'll try!</div>
                            </div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/emily.jpg" alt="Emily" class="chat-profile">
                            <div>
                                <p class="sender-name">Emily</p>
                                <div class="message-bubble">Anyone wants to compare answers?</div>
                            </div>
                        </div>

                        <div class="chat-message user">
                            <div class="message-bubble">Let's discuss it in the next meeting.</div>
                        </div>

                        <div class="chat-message other">
                            <img src="photos/emily.jpg" alt="Emily" class="chat-profile">
                            <div>
                                <p class="sender-name">Emily</p>
                                <div class="message-bubble">When shall we meet?</div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chat-message-input" placeholder="Type a message...">
                        <button onclick="sendMessage()" class="icon-button"><i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>

                <!-- Resource Content -->
                <div id="class-resource" style="display:none;">
                    <div class="resource-list">
                        <h3 style="text-align: center;">Course Materials</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>File Name</th>
                                    <th>Uploaded By</th>
                                    <th>Category</th>
                                    <th>Uploaded Date</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Week 1 Lecture Notes.pdf</td>
                                    <td>Sarah Kim</td>
                                    <td>Note</td>
                                    <td>06/15/2015</td>
                                </tr>
                                <tr>
                                    <td>Midterm Exam Answers2022.pdf</td>
                                    <td>David Brown
                                        <button class="star-btn" onclick="showTAInfo(event)"
                                            style="background: none; border: none; cursor: pointer;">
                                            <i class="fas fa-star" style="color: yellow;"></i>
                                        </button>
                                    </td>
                                    <td>Answer</td>
                                    <td>10/25/2022</td>
                                </tr>
                                <tr>
                                    <td>Practice Final Exam.pdf</td>
                                    <td>Emily Johnson</td>
                                    <td>Exam</td>
                                    <td>11/10/2024</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="upload-section" style="position: fixed; bottom: 20px; width: 100%; text-align: center;">
                        <button class="upload-btn" onclick="openUploadModal()">
                            <i class="fas fa-upload"></i> Upload
                        </button>
                    </div>
                </div>

                <div id="class-members" style="display:none;">
                    <div class="resource-list">
                        <h3 style="text-align: center;">Class Members</h3>
                        <table>
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Section</th>
                                    <th>Role</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Emily Johnson</td>
                                    <td>2024 Fall- Section 01</td>
                                    <td>Student</td>
                                </tr>
                                <tr>
                                    <td>Jonathan Smith</td>
                                    <td>2024 Fall - Section 02</td>
                                    <td>Student</td>
                                </tr>
                                <tr>
                                    <td>Xavier Williams</td>
                                    <td>2024 Fall - Section 06</td>
                                    <td>Student</td>
                                </tr>
                                <tr>
                                    <td>David Brown</td>
                                    <td>2022 Summer - Section 04</td>
                                    <td>TA</td>
                                </tr>
                                <tr>
                                    <td>Richard Zhang</td>
                                    <td>2021 Spring - Section 08</td>
                                    <td>student</td>
                                </tr>
                                <tr>
                                    <td>Michael Lee</td>
                                    <td>2018 Fall - Section 01</td>
                                    <td>Student</td>
                                </tr>
                                <tr>
                                    <td>Sarah Kim</td>
                                    <td>2015 Spring - Section 03</td>
                                    <td>TA</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Upload Modal -->
    <div id="upload-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3>Upload File</h3>
            <div id="drop-area">
                <p id="drop-area-text">Drag and drop a file here, or click to select a file</p>
                <input type="file" id="file-input" hidden>
            </div>
            <div id="file-name-display" style="display: none;">No file selected</div>
            <div>
                <label for="file-category">Choose File Category:</label>
                <select id="file-category">
                    <option value="Note">Note</option>
                    <option value="Answer">Answer</option>
                    <option value="Exam">Exam</option>
                </select>
            </div>
            <div class="modal-buttons">
                <button id="confirm-upload">Confirm</button>
                <button id="cancel-upload" onclick="closeUploadModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Friendlist Page -->
    <div id="friendlist-page" style="display:none;">
        <div class="top-bar">
            <button onclick="toggleFriendRequestArea()" class="icon-button">
                <i class="fas fa-envelope"></i> <!-- Message Icon -->
            </button>
            <button onclick="showPage('friendlist-page')" class="icon-button">
                <i class="fas fa-user-friends"></i> <!-- Friendlist Icon -->
            </button>
            <button onclick="showPage('profile-page')" class="icon-button">
                <i class="fas fa-user"></i> <!-- Profile Icon -->
            </button>
            <button onclick="showPage('home-page')" class="icon-button">
                <i class="fas fa-house"></i> <!-- Home Icon -->
            </button>
        </div>
        <div class="friend-list-container">
            <h2>Friend List</h2>
            <ul class="friend-list">
                <li>
                    <img src="photos/emily.jpg" alt="Emily" class="chat-profile"
                        onclick="showOtherProfile('Emily Johnson', '@emily_johnson', 'Class of 2024', 'Computer Science', ['CS 3500'], 'photos/emily.jpg')">
                    <div class="friend-info">
                        <p><span
                                onclick="showOtherProfile('Emily Johnson', '@emily_johnson', 'Class of 2024', 'Computer Science', ['CS 3500'], 'photos/emily.jpg')">
                                <strong>Emily Johnson</strong>
                            </span></p>
                        <p>Last Active: 2h ago</p>
                        <p>Mutual Courses: CS 3500</p>
                    </div>
                    <button class="delete-button" onclick="deleteFriend(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-button"
                        onclick="showOtherProfile('Emily Johnson', '@emily_johnson', 'Class of 2024', 'Computer Science', ['CS 3500'], 'photos/emily.jpg')">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="icon-button" onclick="openDmArea('Emily Johnson', 'photos/emily.jpg')">
                        <i class="fas fa-envelope"></i>
                    </button>
                </li>

                <li>
                    <img src="photos/xavier.jpg" alt="Xavier" class="chat-profile"
                        onclick="showOtherProfile('Xavier Williams', '@xavier_williams', 'Class of 2025', 'Mathematics', ['CS 2500'], 'photos/xavier.jpg')">
                    <div class="friend-info">
                        <p>
                            <span
                                onclick="showOtherProfile('Xavier Williams', '@xavier_williams', 'Class of 2025', 'Mathematics', ['CS 2500'], 'photos/xavier.jpg')">
                                <strong>Xavier Williams</strong>
                            </span>
                        </p>
                        <p>Last Active: 1h ago</p>
                        <p>Mutual Courses: CS 2500</p>
                    </div>
                    <button class="delete-button" onclick="deleteFriend(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-button"
                        onclick="showOtherProfile('Xavier Williams', '@xavier_williams', 'Class of 2025', 'Mathematics', ['CS 2500'], 'photos/xavier.jpg')">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="icon-button" onclick="openDmArea('Xavier Williams', 'photos/xavier.jpg')">
                        <i class="fas fa-envelope"></i>
                    </button>
                </li>
                <li>
                    <img src="photos/david.jpg" alt="David" class="chat-profile"
                        onclick="showOtherProfile('David Brown', '@david_brown', 'Class of 2023', 'Comuter Science and Physics', ['CS 4400'], 'photos/david.jpg')">
                    <div class="friend-info">
                        <p>
                            <span
                                onclick="showOtherProfile('David Brown', '@david_brown', 'Class of 2023', 'Comuter Science and Physics', ['CS 4400'], 'photos/david.jpg')">
                                <strong>David Brown</strong>
                            </span>
                        </p>
                        <p>Last Active: 5m ago</p>
                        <p>Mutual Courses: CS 4400</p>
                    </div>
                    <button class="delete-button" onclick="deleteFriend(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-button"
                        onclick="showOtherProfile('David Brown', '@david_brown', 'Class of 2023', 'Computer Science and Physics', ['CS 4400'], 'photos/david.jpg')">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="icon-button" onclick="openDmArea('David Brown', 'photos/david.jpg')">
                        <i class="fas fa-envelope"></i>
                    </button>
                </li>

                <li>
                    <img src="photos/erica.jpg" alt="Erica" class="chat-profile"
                        onclick="showOtherProfile('Erica Chen', '@erica_chen', 'Class of 2026', 'Biology', ['CS 2510'], 'photos/erica.jpg')">
                    <div class="friend-info">
                        <p>
                            <span
                                onclick="showOtherProfile('Erica Chen', '@erica_chen', 'Class of 2026', 'Biology', ['CS 2510'], 'photos/erica.jpg')">
                                <strong>Erica Chen</strong>
                            </span>
                        </p>
                        <p>Last Active: 10m ago</p>
                        <p>Mutual Courses: CS 2510</p>
                    </div>
                    <button class="delete-button" onclick="deleteFriend(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-button"
                        onclick="showOtherProfile('Erica Chen', '@erica_chen', 'Class of 2026', 'Biology', ['CS 2510'], 'photos/erica.jpg')">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="icon-button" onclick="openDmArea('Erica Chen', 'photos/erica.jpg')">
                        <i class="fas fa-envelope"></i>
                    </button>
                </li>
                <!-- Anna -->
                <li>
                    <img src="photos/anna.jpg" alt="Anna" class="chat-profile"
                        onclick="showOtherProfile('Anna Smith', '@anna_smith', 'Class of 2027', 'Chemistry', ['CS 3200'], 'photos/anna.jpg')">
                    <div class="friend-info">
                        <p>
                            <span
                                onclick="showOtherProfile('Anna Smith', '@anna_smith', 'Class of 2027', 'Chemistry', ['CS 3200'], 'photos/anna.jpg')">
                                <strong>Anna Smith</strong>
                            </span>
                        </p>
                        <p>Last Active: 15m ago</p>
                        <p>Mutual Courses: CS 3200</p>
                    </div>
                    <button class="delete-button" onclick="deleteFriend(this)">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="icon-button"
                        onclick="showOtherProfile('Anna Smith', '@anna_smith', 'Class of 2027', 'Chemistry', ['CS 3200'], 'photos/anna.jpg')">
                        <i class="fas fa-user"></i>
                    </button>
                    <button class="icon-button" onclick="openDmArea('Anna Smith', 'photos/anna.jpg')">
                        <i class="fas fa-envelope"></i>
                    </button>
                </li>
            </ul>
        </div>
    </div>

    <!-- Other Profile Area -->
    <div id="other-profile-area" class="other-profile-area" style="display: none;">
        <button class="close-button" onclick="closeOtherProfile()">
            <i class="fas fa-times"></i>
        </button>
        <div class="profile-content">
            <img id="other-profile-photo" src="" alt="Profile Photo" class="profile-photo-large">
            <h3 id="other-profile-name"></h3>
            <p id="other-profile-username"></p>
            <p id="other-profile-graduation"></p>
            <p id="other-profile-major"></p>
            <h4>Mutual Courses</h4>
            <ul id="other-profile-courses"></ul>
        </div>
        <div class="profile-buttons">
            <button onclick="deleteFriend(this)">Delete</button>
            <button class="icon-button dm-button"><i class="fas fa-envelope"></i> DM</button>
        </div>
    </div>

    <!-- DM Area -->
    <div id="dm-area" class="dm-area" style="display: none;">
        <div class="dm-header" draggable="true" id="dm-header">
            <img id="dm-profile-photo" src="photos/emily.jpg" alt="Profile Photo" class="dm-profile-photo">
            <h3 id="dm-title">Direct Message - Emily Johnson</h3>
            <button class="close-button" onclick="closeDmArea()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="dm-messages" id="dm-messages"></div>
        <div class="dm-input-area">
            <input type="text" id="dm-input" placeholder="Type a message...">
            <button onclick="sendDmMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>


    <script>
        let username = "";
        let institution = "";
        let selectedCourses = [];

        function showPage(pageId) {
            document.querySelectorAll("div[id$='-page']").forEach(page => {
                page.style.display = "none";
            });

            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = "block";
            }

            if (pageId === 'course-page') {
                document.getElementById('selected-courses-list').style.display = 'block'; // Show fixed course list
            } else {
                document.getElementById('selected-courses-list').style.display = 'none'; // Hide it on other pages
            }

            if (pageId === 'institution-page') {
                document.getElementById('continue-button').classList.add('disabled'); // Reset the button state
                document.getElementById('continue-button').disabled = true;
            }

            if (pageId === 'login-page') {
                document.getElementById('login-menu').classList.add('active');
                document.getElementById('signup-menu').classList.remove('active');
            } else if (pageId === 'signup-page') {
                document.getElementById('signup-menu').classList.add('active');
                document.getElementById('login-menu').classList.remove('active');
            }
            if (pageId === 'profile-page') {
                populateProfile();
            } else if (pageId === 'home-page' || pageId === 'class-page' || pageId === 'resource-page' || pageId === 'members-page') {
                populateHomeMenu();
            }
        }


        function captureSignup() {
            username = document.getElementById('signup-username').value;
            if (!username) {
                alert("Please enter a username.");
                return;
            }
            showPage('institution-page');
        }

        function captureLogin() {
            username = document.getElementById('login-username').value;
            if (!username) {
                alert("Please enter a username.");
                return;
            }
            showPage('institution-page');
        }

        function captureInstitution() {
            institution = document.getElementById('search-bar').value;
            if (!institution) {
                alert("Please select an institution.");
                return;
            }
            showPage('course-page');
        }

        function saveProfile() {
            alert("Profile saved!");
            showPage('home-page');
        }

        function populateProfile() {
            document.getElementById('profile-username').textContent = username || 'Username';
            document.getElementById('profile-institution').textContent = institution || 'Institution not set';

            const profileCoursesList = document.getElementById('profile-courses-list');
            profileCoursesList.innerHTML = '';

            if (selectedCourses.length === 0) {
                profileCoursesList.innerHTML = '<li>No courses selected</li>';
            } else {
                selectedCourses.forEach(course => {
                    const li = document.createElement('li');
                    li.textContent = course;
                    const removeButton = document.createElement('button');
                    removeButton.className = 'delete-button';
                    removeButton.innerHTML = '<i class="fas fa-trash"></i>';
                    removeButton.onclick = () => {
                        removeCourse(course);
                        populateProfile();
                    };
                    li.appendChild(removeButton);
                    profileCoursesList.appendChild(li);
                });
            }
        }

        let friendRequests = [
            { name: "Erica", photo: "photos/erica.jpg" },
            { name: "Anna", photo: "photos/anna.jpg" },
        ];

        function toggleFriendRequestArea() {
            const friendRequestArea = document.getElementById("friend-request-area");
            const redDot = document.getElementById("red-dot");

            // Toggle visibility of the friend request area
            if (friendRequestArea.style.display === "none") {
                friendRequestArea.style.display = "block";
                redDot.style.display = "none"; // Remove the red dot once clicked
                populateFriendRequests();
            } else {
                friendRequestArea.style.display = "none";
            }
        }

        function populateFriendRequests() {
            const requestList = document.getElementById("friend-request-list");
            requestList.innerHTML = ""; // Clear existing content

            friendRequests.forEach(request => {
                const li = document.createElement("li");

                // Add profile photo
                const img = document.createElement("img");
                img.src = request.photo;
                img.alt = request.name;
                img.className = "friend-request-photo";

                // Add name
                const nameSpan = document.createElement("span");
                nameSpan.textContent = request.name;
                nameSpan.className = "friend-request-name";

                // Add accept button
                const acceptButton = document.createElement("button");
                acceptButton.className = "accept-button";
                acceptButton.innerHTML = '<i class="fas fa-check"></i>';
                acceptButton.onclick = () => acceptRequest(request.name);

                // Add reject button
                const rejectButton = document.createElement("button");
                rejectButton.className = "reject-button";
                rejectButton.innerHTML = '<i class="fas fa-times"></i>';
                rejectButton.onclick = () => rejectRequest(request.name);

                li.appendChild(img);
                li.appendChild(nameSpan);
                li.appendChild(acceptButton);
                li.appendChild(rejectButton);

                requestList.appendChild(li);
            });
        }

        function acceptRequest(name) {
            const acceptedRequest = friendRequests.find(request => request.name === name);

            if (acceptedRequest) {
                // Add to friend list
                const friendList = document.querySelector('.friend-list');
                const li = document.createElement('li');

                const img = document.createElement('img');
                img.src = acceptedRequest.photo;
                img.alt = acceptedRequest.name;
                img.className = 'chat-profile';

                const friendInfo = document.createElement('div');
                friendInfo.className = 'friend-info';

                const nameParagraph = document.createElement('p');
                nameParagraph.innerHTML = `<strong>${acceptedRequest.name}</strong>`;
                friendInfo.appendChild(nameParagraph);

                const mutualCoursesParagraph = document.createElement('p');
                mutualCoursesParagraph.textContent = "Mutual Courses: CS 3500"; // Example, can be dynamic
                friendInfo.appendChild(mutualCoursesParagraph);

                const lastActiveParagraph = document.createElement('p');
                lastActiveParagraph.textContent = "Last Active: Just now"; // Example
                friendInfo.appendChild(lastActiveParagraph);

                const deleteButton = document.createElement('button');
                deleteButton.className = 'delete-button';
                deleteButton.innerHTML = '<i class="fas fa-trash"></i>';
                deleteButton.onclick = () => li.remove();

                // Profile button
                const profileButton = document.createElement('button');
                profileButton.className = 'icon-button';
                profileButton.innerHTML = '<i class="fas fa-user"></i>';
                profileButton.onclick = () => showOtherProfile(acceptedRequest.name, acceptedRequest.username, acceptedRequest.graduation, acceptedRequest.major, acceptedRequest.mutualCourses, acceptedRequest.photo);

                // DM button
                const dmButton = document.createElement('button');
                dmButton.className = 'icon-button';
                dmButton.innerHTML = '<i class="fas fa-envelope"></i>';
                dmButton.onclick = () => alert(`Sending a DM to ${acceptedRequest.name}`);

                li.appendChild(img);
                li.appendChild(friendInfo);
                li.appendChild(deleteButton);
                li.appendChild(profileButton);
                li.appendChild(dmButton);
                friendList.appendChild(li);

                // Remove request
                friendRequests = friendRequests.filter(request => request.name !== name);
                populateFriendRequests();
                alert(`You are now friends with ${name}.`);
            }
        }


        function rejectRequest(name) {
            alert(`You have rejected ${name}'s friend request.`);
            friendRequests = friendRequests.filter(request => request.name !== name);
            populateFriendRequests();
        }


        function closeFriendRequestArea() {
            const friendRequestArea = document.getElementById("friend-request-area");
            friendRequestArea.style.display = "none";
        }

        function populateHomeMenu() {
            const homeCoursesMenu = document.getElementById('home-courses-menu');
            homeCoursesMenu.innerHTML = '';
            selectedCourses.forEach(course => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                button.textContent = course;
                button.className = 'menu-btn';
                button.onclick = () => openClassPage(course);
                li.appendChild(button);
                homeCoursesMenu.appendChild(li);
            });
        }


        function removeCourse(course) {
            selectedCourses = selectedCourses.filter(c => c !== course);
            populateProfile();
        }

        // function filterInstitutions() {
        //     const searchQuery = document.getElementById('search-bar').value.toLowerCase();
        //     const institutionList = document.getElementById('institution-list');
        //     institutionList.innerHTML = '';
        //     ["Northeastern University", "MIT", "Harvard", "Boston University"].forEach(institution => {
        //         if (institution.toLowerCase().includes(searchQuery)) {
        //             const li = document.createElement('li');
        //             li.textContent = institution;
        //             li.onclick = () => {
        //                 document.getElementById('search-bar').value = institution;
        //                 document.getElementById('continue-button').classList.remove('disabled');
        //                 document.getElementById('continue-button').disabled = false;
        //             };
        //             institutionList.appendChild(li);
        //         }
        //     });
        // }

        function filterInstitutions() {
            const searchQuery = document.getElementById('search-bar').value.toLowerCase();
            const institutionList = document.getElementById('institution-list');
            institutionList.innerHTML = ''; // Clear previous results

            const institutions = [
                "Northeastern University",
                "MIT",
                "Harvard",
                "Boston University"
            ];

            institutions.forEach(institution => {
                if (institution.toLowerCase().includes(searchQuery)) {
                    // Create a list item for matching institutions
                    const li = document.createElement('li');
                    li.textContent = institution;

                    // Apply styling for visibility
                    li.style.backgroundColor = 'white';
                    li.style.color = '#5e7e60';
                    li.style.padding = '10px';
                    li.style.margin = '5px';
                    li.style.borderRadius = '5px';
                    li.style.cursor = 'pointer';

                    // Add hover effect
                    li.onmouseover = () => li.style.backgroundColor = '#e7f4ea';
                    li.onmouseout = () => li.style.backgroundColor = 'white';

                    // Add click event to select the institution
                    li.onclick = () => {
                        document.getElementById('search-bar').value = institution;
                        const continueButton = document.getElementById('continue-button');
                        continueButton.classList.remove('disabled');
                        continueButton.disabled = false;
                    };

                    // Append the item to the list
                    institutionList.appendChild(li);
                }
            });

            // If no matches found
            if (institutionList.innerHTML === '') {
                const li = document.createElement('li');
                li.textContent = 'No results found';
                li.style.backgroundColor = 'white';
                li.style.color = 'red';
                li.style.padding = '10px';
                li.style.margin = '5px';
                li.style.borderRadius = '5px';
                institutionList.appendChild(li);
            }
        }


        function filterCourses() {
            const searchQuery = document.getElementById('course-search-bar').value.toLowerCase();
            const courseList = document.getElementById('course-list');
            courseList.innerHTML = '';
            ["CS 2500: Fundamentals of Computer Science 1",
                "CS 2510: Fundamentals of Computer Science 2",
                "CS 3200: Database Design",
                "CS 3500: Object-Oriented Design",
                "CS 4800: Algorithms and Data",
                "CS 4400: Machine Learning"].forEach(course => {
                    if (course.toLowerCase().includes(searchQuery)) {
                        const li = document.createElement('li');
                        li.textContent = course;
                        li.onclick = () => {
                            if (!selectedCourses.includes(course)) {
                                selectedCourses.push(course);
                                document.getElementById('course-continue-button').classList.remove('disabled');
                                document.getElementById('course-continue-button').disabled = false;
                                populateSelectedCourses();
                            }
                        };
                        courseList.appendChild(li);
                    }
                });
        }

        function populateSelectedCourses() {
            const selectedList = document.getElementById('selected-courses-list');
            selectedList.innerHTML = '';
            selectedCourses.forEach(course => {
                const li = document.createElement('li');
                li.textContent = course;
                selectedList.appendChild(li);
            });
        }

        function populateClassMenu() {
            const classCoursesMenu = document.querySelector('#class-page .menu ul');
            classCoursesMenu.innerHTML = '';
            selectedCourses.forEach(course => {
                const li = document.createElement('li');
                const button = document.createElement('button');
                button.textContent = course;
                button.className = 'menu-btn';
                button.onclick = () => openClassPage(course);
                li.appendChild(button);
                classCoursesMenu.appendChild(li);
            });
        }

        function showClassContent(contentId) {
            document.querySelectorAll("#class-page > .container > .class-content-wrapper > div[id^='class']").forEach(content => {
                content.style.display = "none";
            });
            document.getElementById(contentId).style.display = "block";
        }

        function openClassPage(courseName) {
            document.getElementById('class-title').innerText = courseName;
            populateClassMenu();
            showPage('class-page');
        }


        function sendMessage() {
            const messageInput = document.getElementById('chat-message-input');
            const message = messageInput.value.trim();

            if (message) {
                const chatBox = document.querySelector('.chat-box');

                // Create the new message bubble
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message user';
                messageDiv.innerHTML = `<div class="message-bubble">${message}</div>`;
                chatBox.appendChild(messageDiv);

                // Clear the input field
                messageInput.value = '';

                // Scroll to the latest message
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        }


        document.getElementById('chat-message-input').addEventListener('keypress', function (event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                sendMessage();
            }
        });

        function showClassContent(contentId) {
            document.querySelectorAll("#class-page > .container > .class-content-wrapper > div[id^='class']").forEach(content => {
                content.style.display = "none";
            });
            document.getElementById(contentId).style.display = "block";

            document.querySelectorAll(".course-buttons .menu-btn").forEach(btn => {
                btn.classList.remove("active");
            });

            const activeButton = document.querySelector(`.menu-btn[onclick="showClassContent('${contentId}')"]`);
            if (activeButton) {
                activeButton.classList.add("active");
            }
        }

        const dropArea = document.getElementById('drop-area');
        const fileInput = document.getElementById('file-input');
        const fileNameDisplay = document.getElementById('file-name-display');
        const uploadModal = document.getElementById('upload-modal');

        function openUploadModal() {
            uploadModal.style.display = 'block';
        }

        function closeUploadModal() {
            uploadModal.style.display = 'none';
            fileInput.value = '';
            fileNameDisplay.style.display = 'none';
        }

        // Handle click to trigger file input
        dropArea.addEventListener('click', () => fileInput.click());

        // Handle dragover event
        dropArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            dropArea.style.borderColor = '#5e7e60';
        });

        // Handle dragleave event
        dropArea.addEventListener('dragleave', () => {
            dropArea.style.borderColor = '#83af86';
        });

        // Handle file drop
        dropArea.addEventListener('drop', (e) => {
            e.preventDefault();
            handleFiles(e.dataTransfer.files);
        });

        fileInput.addEventListener('change', () => handleFiles(fileInput.files));

        function handleFiles(files) {
            if (files.length > 0) {
                const file = files[0];
                const fileName = file.name;

                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(file);
                fileInput.files = dataTransfer.files;

                fileNameDisplay.textContent = `Selected file: ${fileName}`;
                fileNameDisplay.style.display = 'block';
            }
        }

        function viewProfile(friendName) {
            alert(`Viewing profile of ${friendName}`);
            // Logic to navigate to the friend's profile
        }

        function deleteFriend(button) {
            if (confirm("Are you sure you want to delete this friend?")) {
                const friendItem = button.closest('li');
                friendItem.remove();
                const friendList = document.querySelector('.friend-list');
                if (friendList.children.length === 0) {
                    showNoFriendsMessage();
                }
            }
        }

        function showNoFriendsMessage() {
            const friendListContainer = document.querySelector('.friend-list-container');
            friendListContainer.innerHTML = `
        <h2>Friend List</h2>
        <p style="color: #5e7e60; text-align: center;">You have no friends yet. Add some to see them here!</p>
    `;
        }

        function showOtherProfile(name, username, graduation, major, mutualCourses, photo) {
            const profileArea = document.getElementById("other-profile-area");
            profileArea.style.display = "block";

            document.getElementById("other-profile-name").textContent = name;
            document.getElementById("other-profile-username").textContent = username;
            document.getElementById("other-profile-graduation").textContent = graduation;
            document.getElementById("other-profile-major").textContent = major;

            const profilePhoto = document.getElementById("other-profile-photo");
            profilePhoto.src = photo;

            const courseList = document.getElementById("other-profile-courses");
            courseList.innerHTML = "";
            mutualCourses.forEach(course => {
                const li = document.createElement("li");
                li.textContent = course;
                courseList.appendChild(li);
            });

            const dmButton = profileArea.querySelector(".dm-button");
            dmButton.onclick = () => openDmArea(name, photo);
        }

        function closeOtherProfile() {
            document.getElementById("other-profile-area").style.display = "none";
        }

        function openDmArea(name, photo) {
            const dmArea = document.getElementById("dm-area");
            const dmTitle = document.getElementById("dm-title");
            const dmPhoto = document.getElementById("dm-profile-photo");
            const dmMessages = document.getElementById("dm-messages");

            dmTitle.textContent = `Direct Message - ${name}`;
            dmPhoto.src = photo;
            dmArea.style.display = "block";
            dmMessages.innerHTML = "";
        }

        function closeDmArea() {
            document.getElementById("dm-area").style.display = "none";
        }

        function sendDmMessage() {
            const dmInput = document.getElementById("dm-input");
            const message = dmInput.value.trim();
            const dmMessages = document.getElementById("dm-messages");

            if (message) {
                const userBubble = document.createElement("div");
                userBubble.className = "message-bubble right";
                userBubble.textContent = message;
                dmMessages.appendChild(userBubble);
                // Scroll to the bottom
                dmMessages.scrollTop = dmMessages.scrollHeight;
                dmInput.value = "";

                setTimeout(() => {
                    const responseBubble = document.createElement("div");
                    responseBubble.className = "message-bubble left";
                    responseBubble.textContent = "Thanks for your message!";
                    dmMessages.appendChild(responseBubble);
                    dmMessages.scrollTop = dmMessages.scrollHeight;
                }, 1000);
            }
        }

        function showTAInfo(event) {
            // Remove any existing TA info boxes
            const existingInfo = document.querySelector(".ta-info");
            if (existingInfo) existingInfo.remove();

            // Create a new TA info box
            const infoBox = document.createElement("div");
            infoBox.className = "ta-info";
            infoBox.textContent = "This user is assigned as a Teaching Assistant.";

            // Style the TA info box
            infoBox.style.position = "absolute";
            infoBox.style.backgroundColor = "white";
            infoBox.style.border = "2px solid #83af86";
            infoBox.style.color = "#83af86";
            infoBox.style.padding = "10px";
            infoBox.style.borderRadius = "5px";
            infoBox.style.boxShadow = "0px 4px 6px rgba(0, 0, 0, 0.1)";
            infoBox.style.zIndex = "1000";
            infoBox.style.whiteSpace = "nowrap";

            // Position the info box near the clicked star button
            const rect = event.target.getBoundingClientRect();
            infoBox.style.top = `${window.scrollY + rect.top - 40}px`;
            infoBox.style.left = `${window.scrollX + rect.left}px`;

            // Add the info box to the document
            document.body.appendChild(infoBox);

            // Remove the info box after 3 seconds
            setTimeout(() => {
                infoBox.remove();
            }, 3000);
        }

        document.getElementById('confirm-upload').addEventListener('click', () => {
            const fileCategory = document.getElementById('file-category').value;

            if (fileInput.files.length === 0) {
                alert('No file selected. Please select a file to upload.');
                return;
            }

            const fileName = fileInput.files[0].name;
            const uploadDate = new Date().toLocaleDateString();
            const username = "Current User";

            const resourceTableBody = document.querySelector('#class-resource tbody');
            const newRow = document.createElement('tr');
            newRow.innerHTML = `
        <td>${fileName}</td>
        <td>${username}</td>
        <td>${fileCategory}</td>
        <td>${uploadDate}</td>
    `;
            resourceTableBody.appendChild(newRow);

            alert('File uploaded successfully!');
            closeUploadModal();
        });

        document.getElementById("dm-input").addEventListener("keypress", (event) => {
            if (event.key === "Enter") {
                event.preventDefault();
                sendDmMessage();
            }
        });

        // Cancel upload
        document.getElementById('cancel-upload').addEventListener('click', closeUploadModal);

    </script>
</body>

</html>
